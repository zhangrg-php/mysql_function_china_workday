<?php

$cal = [
    '2017' => [
        'holidays' => [
            '20170101',
            '20170102',
            '20170127',
            '20170128',
            '20170129',
            '20170130',
            '20170131',
            '20170201',
            '20170202',
            '20170402',
            '20170403',
            '20170404',
            '20170429',
            '20170430',
            '20170501',
            '20170528',
            '20170529',
            '20170530',
            '20171001',
            '20171002',
            '20171003',
            '20171004',
            '20171005',
            '20171006',
            '20171007',
            '20171008',
            '20171230',
            '20171231'
        ],
        'weekendWorkDays' => [
            '20170122',
            '20170204',
            '20170401',
            '20170527',
            '20170930'
        ]
    ],
    '2018' => [
        'holidays' => [
            '20180101',
            '20180215',
            '20180216',
            '20180217',
            '20180218',
            '20180219',
            '20180220',
            '20180221',
            '20180405',
            '20180406',
            '20180407',
            '20180429',
            '20180430',
            '20180501',
            '20180616',
            '20180617',
            '20180618',
            '20180922',
            '20180923',
            '20180924',
            '20181001',
            '20181002',
            '20181003',
            '20181004',
            '20181005',
            '20181006',
            '20181007',
            '20181230',
            '20181231'
        ],
        'weekendWorkDays' => [
            '20180211',
            '20180224',
            '20180408',
            '20180428',
            '20180929',
            '20180930',
            '20181229'
        ]
    ],
    '2019' => [
        'holidays' => [
            '20190101',
            '20190204',
            '20190205',
            '20190206',
            '20190207',
            '20190208',
            '20190209',
            '20190210',
            '20190405',
            '20190406',
            '20190407',
            '20190501',
            '20190502',
            '20190503',
            '20190504',
            '20190607',
            '20190608',
            '20190609',
            '20190913',
            '20190914',
            '20190915',
            '20191001',
            '20191002',
            '20191003',
            '20191004',
            '20191005',
            '20191006',
            '20191007'
        ],
        'weekendWorkDays' => [
            '20190202',
            '20190203',
            '20190428',
            '20190505',
            '20190929',
            '20191012'
        ]
    ],
    '2020' => [
        'holidays' => [
            '20200101',//元旦放假
            '20200124',//春节放假
            '20200125',//春节放假
            '20200126',//春节放假
            '20200127',//春节放假
            '20200128',//春节放假
            '20200129',//春节放假
            '20200130',//春节放假
            '20200404',//清明放假
            '20200405',//清明放假
            '20200406',//清明放假
            '20200501',//五一放假
            '20200502',//五一放假
            '20200503',//五一放假
            '20200504',//五一放假
            '20200505',//五一放假
            '20200625',//端午放假
            '20200626',//端午放假
            '20200627',//端午放假
            '20201001',//中秋国庆放假
            '20201002',//中秋国庆放假
            '20201003',//中秋国庆放假
            '20201004',//中秋国庆放假
            '20201005',//中秋国庆放假
            '20201006',//中秋国庆放假
            '20201007',//中秋国庆放假
            '20201008'//中秋国庆放假
        ],
        'weekendWorkDays' => [
            '20200119', //春节调休
            '20200201',//春节调休
            '20200426', //五一调休
            '20200509',//五一调休
            '20200628', //端午调休
            '20200927', //国庆调休
            '20201010' //国庆调休
        ]
    ],
    '2021' => [
        'holidays' => [
            '20210101',//元旦放假
            '20210102',//元旦放假
            '20210103',//元旦放假
            '20210211',//春节放假
            '20210212',//春节放假
            '20210213',//春节放假
            '20210214',//春节放假
            '20210215',//春节放假
            '20210216',//春节放假
            '20210217',//春节放假
            '20210403',//清明放假
            '20210404',//清明放假
            '20210405',//清明放假
            '20210501',//五一放假
            '20210502',//五一放假
            '20210503',//五一放假
            '20210504',//五一放假
            '20210505',//五一放假
            '20210612',//端午放假
            '20210613',//端午放假
            '20210614',//端午放假
            '20210919',//中秋国庆放假
            '20210920',//中秋国庆放假
            '20210921',//中秋国庆放假
            '20211001',//国庆放假
            '20211002',//国庆放假
            '20211003',//国庆放假
            '20211004',//国庆放假
            '20211005',//国庆放假
            '20211006',//国庆放假
            '20211007',//国庆放假
        ],
        'weekendWorkDays' => [
            '20210207', //春节调休
            '20210220',//春节调休
            '20210425', //五一调休
            '20210508',//五一调休
            '20210918',//中秋调休
            '20210926', //国庆调休
            '20211009' //国庆调休
        ]
    ]
];

$index = 0;
$arr = [];

for ($i = strtotime('20170101'); $i < strtotime('20220101'); $i = $i + 86400) {
    $date = date('Ymd', $i);
    $year = date('Y', $i);
    $w = date('w', $i);
    switch ($w) {
        case 0:
        case 6:
            if (in_array($date, $cal[$year]['weekendWorkDays'])) {
                $index++;
            }
            break;
        default:
            if (!in_array($date, $cal[$year]['holidays'])) {
                $index++;
            }
            break;
    }
    $arr[$date] = $index;
}

echo json_encode($arr);